<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on rsatiwari-tech notes</title>
        <link>https://rsatcodehub.github.io/rsatiwari/posts/</link>
        <description>Recent content in Posts on rsatiwari-tech notes</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC 4.0&lt;/a&gt;</copyright>
        <lastBuildDate>Thu, 23 Feb 2023 07:26:31 +1100</lastBuildDate>
        <atom:link href="https://rsatcodehub.github.io/rsatiwari/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>Azcmd1</title>
            <link>https://rsatcodehub.github.io/rsatiwari/posts/azcmd1/</link>
            <pubDate>Thu, 23 Feb 2023 07:26:31 +1100</pubDate>
            
            <guid>https://rsatcodehub.github.io/rsatiwari/posts/azcmd1/</guid>
            <description>This is a test blog for checking tags
To check the current context use the following az cli cmd az account set --subscription &amp;quot;name&amp;quot;</description>
            <content type="html"><![CDATA[<p>This is a test blog for checking tags</p>
<p>To check the current context use the following az cli cmd
<code>az account set --subscription &quot;name&quot;</code></p>
]]></content>
        </item>
        
        <item>
            <title>Azcmds</title>
            <link>https://rsatcodehub.github.io/rsatiwari/posts/azcmds/</link>
            <pubDate>Thu, 23 Feb 2023 07:26:31 +1100</pubDate>
            
            <guid>https://rsatcodehub.github.io/rsatiwari/posts/azcmds/</guid>
            <description>This is a test for second blog post
To check the current context use the following az cli cmd &amp;ndash;&amp;gt; az account show -o table</description>
            <content type="html"><![CDATA[<p>This is a test for second blog post</p>
<p>To check the current context use the following az cli cmd &ndash;&gt; <code>az account show -o table</code></p>
]]></content>
        </item>
        
        <item>
            <title>Examplepost</title>
            <link>https://rsatcodehub.github.io/rsatiwari/posts/examplepost/</link>
            <pubDate>Thu, 23 Feb 2023 07:00:21 +1100</pubDate>
            
            <guid>https://rsatcodehub.github.io/rsatiwari/posts/examplepost/</guid>
            <description>This is example post
Lets add some tech commands here
kubectl get nodes</description>
            <content type="html"><![CDATA[<p>This is example post</p>
<p>Lets add some tech commands here</p>
<p><code>kubectl get nodes</code></p>
]]></content>
        </item>
        
        <item>
            <title>ADO Agent Installation for Windows VM in a secure environment</title>
            <link>https://rsatcodehub.github.io/rsatiwari/posts/ado-iis/</link>
            <pubDate>Thu, 23 Feb 2023 02:26:31 +1100</pubDate>
            
            <guid>https://rsatcodehub.github.io/rsatiwari/posts/ado-iis/</guid>
            <description>Scenario: You need to register a Windows Virtual machines as a deployment target in Azure DevOps Project. Also, the VMs are placed in a secure zone where files cannot be downloaded directly due to firewall restrictions. Hence, you cannot use the ADO default registration script to download the vsts agent and register it.
Steps to configure it -
Azure DevOps - Create a new Deployment Group eg. DG-External This is where the VMs will be registered.</description>
            <content type="html"><![CDATA[<p>Scenario: You need to register a Windows Virtual machines as a deployment target in Azure DevOps Project. Also, the VMs are placed in a secure zone where files cannot be downloaded directly due to firewall restrictions. Hence, you cannot use the ADO default registration script to download the vsts agent and register it.</p>
<p>Steps to configure it -</p>
<ol>
<li>Azure DevOps - Create a new Deployment Group eg. DG-External</li>
</ol>
<pre tabindex="0"><code>
    <img src="../images/ADO-IIS-DeploymentGroup.PNG"  class="left"  />


</code></pre><p>This is where the VMs will be registered.</p>
<ol start="2">
<li>Once the #1 is completed, you should see registration script something like below</li>
</ol>
<pre tabindex="0"><code>
    <img src="../images/ADO-Registration-Script.PNG"  class="left"  />


</code></pre><p>Use the copy option and since we are going to download manually ADO agent file (refer to step3), we need to modify this script.</p>
<p>Grab the last bit of the registration script, so it would be something like this</p>
<p><code>.\config.cmd --deploymentgroup --deploymentgroupname &quot;DG-External&quot; --agent $env:COMPUTERNAME --runasservice --work '_work' --url 'https://companyname.visualstudio.com/' --projectname 'ADO Project Name' --auth PAT --token xxxxxxxxxxxxxxxxxx</code></p>
<p>url &ndash;&gt; replace companyname with your relevent ADO</p>
<p>The rest are self explanatory, when you generate the registration script, PAT token is automatically generated, which is typically valid less than a day.</p>
<ol start="3">
<li>Now, download the ADO/vsts agent for windows from the below location</li>
</ol>
<p><a href="https://github.com/microsoft/azure-pipelines-agent/releases">https://github.com/microsoft/azure-pipelines-agent/releases</a></p>
<ol start="4">
<li>You may not need it, but for my scenario these VMs were clone and had previous ADO agent installed.</li>
</ol>
<p>To remove/unregister ADO agent <code>.\config.cmd remove --unattended</code> remember to run this from the location where previous install of ADO agent is, eg. C:\adoagent\A1</p>
<ol start="5">
<li>Once you have populated all the fields in code in step 2, start powershell and run it</li>
</ol>
<pre tabindex="0"><code>
    <img src="../images/registeradoclient01.PNG"  class="left"  />


</code></pre><p>You can either use the default account or if you have a service account use it here</p>
<pre tabindex="0"><code>
    <img src="../images/registeradoclient02.PNG"  class="left"  />


</code></pre><p>This should complete your registration steps.</p>
<p>Validate it in Azure DevOps Project deployment group and add any tags against this, it could be useful in pipeline</p>
]]></content>
        </item>
        
    </channel>
</rss>
